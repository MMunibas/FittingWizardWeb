# Directory structure

- `docs` contains this documentation
- `fitting` contains the java source and gradle build files for the fitting web & wizard

# Project structure

The fitting project under `fitting` contains the following modules:

- `fitting-web`: The web implementation of the fitting wizard built with Apache Wicket.
- `fitting-wizard`: The JavaFX standalone implementation of the fitting wizard.
- `fitting-shared`: All components shared between `fitting-web` and `fitting-wizard`

# Setup requirements

The fitting web & wizard software requires the following installation:

- `Java 8`
- `Gaussian`
- `CHARMM`
- `Python`
- `Custom scripts`  

# Configuration

There are two configuration files. One development (`config.ini`), one release (`config_release.ini`).

The config name expected by the application is `config.ini` and means, the development configuration is active by default.

When the distZip is executed, the `config_release.ini` file is named to `config.ini` and included into the zip file.

The development config has the mocking behaviors enabled by default, so that development without any dependencies is possible. 

# Development environment

We used Gradle (http://gradle.org/) as build system. This allows developers to use their IDE of choise, as long as a Gradle plugin is available. However, we recommend to use IntelliJ (https://www.jetbrains.com/idea/). There is a free community edition with a Gradle plugin available.

No installation of Gradle is required. The fitting directory includes the Gradle wrapper, which bootstraps the Gradle installation with all necessary dependencies.

The Gradle wrapper expectes a `JAVA_HOME` environment variable set to the Java runtime directory.

# Build 

In order the execute Gradle tasks, one has to open a console with the `fitting` directory as working directory. Here is a selection of possible commands:

- `gradlew build` compiles and builds jar files for all modules and creates the output files into a `build/` subdirectory
- `gradlew clean` cleans up all files generated by the build task (e.g. deletes the `build/` directories in thair for each module)
- `gradlew fitting-web:build` runs the build task for the `fitting-web` module
- `gradlew distZip` creates a zip file  for distribution in the `build/distributions` directory

# Development with mocks

In order to provide a smooth and reproducible development setup, we created mock implementations of all important scripts, e.g. Gaussian and CHARMM. The mock implementations mostly work with pre-generated output data located in the `fitting/testdata` directory. A mock will simulate a script run by copying the pre-generated files to the expected output directories.

Mocks should start with a `Mock` class name prefix and may implement the `MockScriptBase` base class. For example, the `MockMultipoleGaussScript` simultes the execution of the `RealMultipoleGaussScript`.

# Design 

Please check out [Fitting Web Important Concepts](web_important_concepts.md) for details about design concetps.